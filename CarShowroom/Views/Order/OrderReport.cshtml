@model IEnumerable<OrderReportModel>

<h1>Order Report</h1>

<form id="orderReportForm" method="get">
    <div>
        <label for="carModel">Car Model:</label>
        <input type="text" name="carModel" id="carModel" />
    </div>
    <div>
        <label for="customerId">Customer ID:</label>
        <input type="number" name="customerId" id="customerId" />
    </div>
    <div>
        <label for="sortOrder">Sort Order:</label>
        <select name="sortOrder" id="sortOrder">
            <option value="">-- Select Sort Order --</option>
            <option value="model_asc">Model (Ascending)</option>
            <option value="model_desc">Model (Descending)</option>
            <option value="total_sum_asc">Total Sum (Ascending)</option>
            <option value="total_sum_desc">Total Sum (Descending)</option>
        </select>
    </div>
    <div>
        <button type="submit">Generate Report</button>
    </div>
</form>

<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.OrderId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OriginalPrice)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TotalSum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CarModel)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CustomerName)
            </th>
            <!-- Display additional aggregated metrics headers -->
        </tr>
    </thead>
    <tbody id="orderReportTable">
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.OrderId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.OriginalPrice)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TotalSum)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Quantity)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CarModel)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CustomerName)
                </td>
                <!-- Display additional aggregated metrics data -->
            </tr>
        }
    </tbody>
</table>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('orderReportForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the default form submission

            // Get the form data
            var form = event.target;
            var formData = new FormData(form);

            // Perform an AJAX request to generate the order report
            $.ajax({
                url: form.action,
                type: form.method,
                data: formData,
                processData: false,
                contentType: false,
                success: function (result) {
                    // Replace the table body with the updated order report data
                    $("#orderReportTable tbody").html(result);
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });
    });
</script>
